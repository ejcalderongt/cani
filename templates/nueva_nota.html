
{% extends "base.html" %}

{% block content %}
<h1>Nueva Nota de Enfermería</h1>

<form method="POST" class="row g-3">
    <div class="col-md-6">
        <label for="fecha" class="form-label">Fecha *</label>
        <input type="date" class="form-control" id="fecha" name="fecha" value="{{ moment().format('YYYY-MM-DD') }}" required>
    </div>
    
    <div class="col-md-6">
        <label for="hora" class="form-label">Hora *</label>
        <input type="time" class="form-control" id="hora" name="hora" required>
    </div>
    
    <div class="col-12">
        <label for="paciente_id" class="form-label">Paciente *</label>
        <select class="form-select" id="paciente_id" name="paciente_id" required>
            <option value="">Seleccionar paciente...</option>
            {% for paciente in pacientes %}
            <option value="{{ paciente.id }}">{{ paciente.numero_expediente }} - {{ paciente.nombre }} {{ paciente.apellidos }}</option>
            {% endfor %}
        </select>
    </div>
    
    <div class="col-12">
        <label for="observaciones" class="form-label">Observaciones y Cuidados de Enfermería *</label>
        <textarea class="form-control" id="observaciones" name="observaciones" rows="5" required></textarea>
    </div>
    
    <div class="col-12">
        <label for="medicamentos_administrados" class="form-label">Medicamentos Administrados</label>
        <textarea class="form-control" id="medicamentos_administrados" name="medicamentos_administrados" rows="3"></textarea>
    </div>
    
    <div class="col-12">
        <label for="tratamientos" class="form-label">Tratamientos Realizados</label>
        <textarea class="form-control" id="tratamientos" name="tratamientos" rows="3"></textarea>
    </div>
    
    <div class="col-12">
        <button type="submit" class="btn btn-success">Guardar Nota</button>
        <a href="{{ url_for('notas_enfermeria') }}" class="btn btn-secondary">Cancelar</a>
    </div>
</form>

<script>
// Set current time
document.addEventListener('DOMContentLoaded', function() {
    const now = new Date();
    const hours = String(now.getHours()).padStart(2, '0');
    const minutes = String(now.getMinutes()).padStart(2, '0');
    document.getElementById('hora').value = hours + ':' + minutes;
    
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('fecha').value = today;
});
</script>
{% endblock %}
